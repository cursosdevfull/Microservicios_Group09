"use strict";var __importDefault=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(exports,"__esModule",{value:!0});const app_1=__importDefault(require("./app")),broker_bootstrap_1=__importDefault(require("./bootstrap/broker.bootstrap")),database_bootstrap_1=__importDefault(require("./bootstrap/database.bootstrap")),server_bootstrap_1=__importDefault(require("./bootstrap/server.bootstrap")),Logger_1=__importDefault(require("./helpers/Logger")),broker_application_1=require("./module/application/broker.application"),broker_infrastructure_1=require("./module/infrastructure/broker.infrastructure"),broker_controller_1=__importDefault(require("./module/interfaces/broker/broker.controller")),server=new server_bootstrap_1.default(app_1.default),database=new database_bootstrap_1.default,broker=new broker_bootstrap_1.default,brokerRepository=new broker_infrastructure_1.BrokerInfrastructure,brokerApplication=new broker_application_1.BrokerApplication(brokerRepository),brokerController=new broker_controller_1.default(brokerApplication);(async()=>{try{const r=[server.initialize(),database.initialize(),broker.initialize()];await Promise.all(r),brokerController.listen(),setTimeout((()=>{brokerController.sent({patientName:"Rosa Muga"})}),2e3)}catch(r){Logger_1.default.error(r),process.exit(1)}})();